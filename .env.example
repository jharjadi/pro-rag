# pro-rag environment configuration
# Copy to .env and fill in values

# ── Database ──────────────────────────────────────────────
POSTGRES_HOST=localhost
POSTGRES_PORT=5433
POSTGRES_DB=prorag
POSTGRES_USER=prorag
POSTGRES_PASSWORD=prorag_dev
DATABASE_URL=postgres://prorag:prorag_dev@localhost:5433/prorag?sslmode=disable

# ── Embedding ─────────────────────────────────────────────
EMBEDDING_MODEL=BAAI/bge-base-en-v1.5
EMBEDDING_DIM=768
EMBEDDING_BATCH_SIZE=256

# ── Retrieval ─────────────────────────────────────────────
K_VEC=50
K_FTS=50
RRF_K=60

# ── Reranker (Cohere) ────────────────────────────────────
RERANK_PROVIDER=cohere
COHERE_API_KEY=your-cohere-api-key-here
COHERE_RERANK_MODEL=rerank-v3.5
RERANK_TIMEOUT_MS=3000
RERANK_MAX_DOCS=50
RERANK_FAIL_OPEN=true

# ── Abstain thresholds ───────────────────────────────────
ABSTAIN_RERANK_THRESHOLD=0.15
ABSTAIN_RRF_THRESHOLD=0.030

# ── Context budgeting ────────────────────────────────────
MAX_CONTEXT_TOKENS=6000
CONTEXT_OVERHEAD_TOKENS=1000
MAX_CONTEXT_CHUNKS=12

# ── LLM ──────────────────────────────────────────────────
LLM_PROVIDER=anthropic
LLM_MODEL=claude-sonnet-4-20250514
ANTHROPIC_API_KEY=your-anthropic-api-key-here
LLM_MAX_TOKENS=1024

# ── Chunking (ingestion) ─────────────────────────────────
CHUNK_TARGET_TOKENS=450
CHUNK_MIN_TOKENS=350
CHUNK_MAX_TOKENS=500
CHUNK_HARD_CAP_TOKENS=800
CHUNK_OVERLAP=0

# ── Embedding Sidecar ────────────────────────────────────
EMBED_ENDPOINT=http://embed:8001/embed

# ── Ingestion ────────────────────────────────────────────
ARTIFACT_BASE_PATH=/data/artifacts

# ── Server ───────────────────────────────────────────────
API_PORT=8000
API_HOST=0.0.0.0
